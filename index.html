<!DOCTYPE html>
<html>
<head>
    <title>Shark Tank Hackathon Judging Portal</title>
    <style>
        :root {
            --ocean-blue: #0077be;
            --shark-gray: #4a4a4a;
            --gold: #ffd700;
            --coral: #ff7f50;
            --seafoam: #9fe2bf;
            --danger-red: #ff4444;
        }
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f8ff;
            color: var(--shark-gray);
        }
        .header {
            background: linear-gradient(135deg, var(--ocean-blue), var(--seafoam));
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }
        .header h2 {
            margin: 10px 0 0;
            font-size: 1.3em;
            font-weight: normal;
            position: relative;
            z-index: 2;
        }
        .shark-icon {
            position: absolute;
            font-size: 100px;
            opacity: 0.2;
            z-index: 1;
        }
        .shark-left {
            left: 20px;
            top: 20px;
            transform: rotate(-15deg);
        }
        .shark-right {
            right: 20px;
            bottom: 20px;
            transform: rotate(15deg);
        }
        .judge-info {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .info-field {
            flex: 1;
            min-width: 200px;
        }
        .info-field label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--ocean-blue);
        }
        .info-field input, .info-field select {
            width: 100%;
            padding: 5px;
            border: 2px solid #ddd;
            border-radius: 6px;
            transition: all 0.3s;
            font-size: 16px;
        }
        .info-field input:focus, .info-field select:focus {
            border-color: var(--ocean-blue);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0,119,190,0.2);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background-color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 15px;
            text-align: left;
        }
        th {
            background-color: var(--ocean-blue);
            color: white;
            font-weight: bold;
            position: sticky;
            top: 0;
            font-size: 16px;
        }
        .criteria-name {
            font-weight: bold;
            color: var(--ocean-blue);
            font-size: 16px;
        }
        .criteria-desc {
            font-size: 14px;
            color: #555;
            line-height: 1.6;
        }
        .score-cell {
            width: 100px;
            text-align: center;
        }
        .score-cell input {
            width: 80px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s;
        }
        .score-cell input:focus {
            border-color: var(--ocean-blue);
            outline: none;
            box-shadow: 0 0 5px rgba(0,119,190,0.5);
        }
        .total-row {
            font-weight: bold;
            background-color: #e6f2ff;
        }
        .total-score {
            font-size: 18px;
            color: var(--ocean-blue);
            font-weight: bold;
        }
        .comments-section {
            margin-top: 25px;
            background-color: white;
            padding: 39px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .comments-section h3 {
            margin-top: 0;
            color: var(--ocean-blue);
            border-bottom: 2px solid var(--seafoam);
            padding-bottom: 10px;
            font-size: 18px;
        }
        textarea {
            width: 100%;
            height: 120px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            resize: vertical;
            transition: border 0.3s;
            font-family: Arial, sans-serif;
            font-size: 14px;
        }
        textarea:focus {
            border-color: var(--ocean-blue);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0,119,190,0.2);
        }
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 16px;
        }
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .save-btn {
            background-color: var(--ocean-blue);
            color: white;
        }
        .save-btn:hover {
            background-color: #0066a8;
        }
        .excel-btn {
            background-color: #1d6f42;
            color: white;
        }
        .excel-btn:hover {
            background-color: #165a35;
        }
        .pdf-btn {
            background-color: #e74c3c;
            color: white;
        }
        .pdf-btn:hover {
            background-color: #c0392b;
        }
        .new-team-btn {
            background-color: var(--coral);
            color: white;
        }
        .new-team-btn:hover {
            background-color: #e66a3d;
        }
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin: 20px 0;
            height: 25px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--seafoam), var(--ocean-blue));
            border-radius: 10px;
            width: 0%;
            transition: width 0.5s;
            text-align: center;
            color: white;
            font-weight: bold;
            line-height: 25px;
            font-size: 14px;
        }
        .rating-emoji {
            font-size: 24px;
            display: inline-block;
            margin-left: 10px;
            vertical-align: middle;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--ocean-blue);
            flex-wrap: wrap;
        }
        .tab {
            padding: 12px 25px;
            cursor: pointer;
            background-color: #e6f2ff;
            border: 1px solid #ddd;
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            margin-right: 5px;
            transition: all 0.3s;
            font-weight: bold;
            font-size: 16px;
        }
        .tab.active {
            background-color: var(--ocean-blue);
            color: white;
        }
        .tab:hover:not(.active) {
            background-color: #cce0ff;
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .tab-content.active {
            display: block;
        }
        .confetti {
            position: fixed;
            width: 15px;
            height: 15px;
            background-color: var(--gold);
            opacity: 0;
            animation: confetti-fall 5s ease-in-out;
            z-index: 1000;
        }
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        .team-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        .team-card:hover {
            transform: translateY(-5px);
        }
        .team-card h3 {
            margin-top: 0;
            color: var(--ocean-blue);
            border-bottom: 2px solid var(--seafoam);
            padding-bottom: 10px;
        }
        .team-card p {
            margin: 8px 0;
        }
        .team-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .team-actions button {
            padding: 8px 15px;
            font-size: 14px;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            position: relative;
        }
        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
        }
        .close-modal:hover {
            color: var(--shark-gray);
        }
        .score-guide {
            font-size: 14px;
            line-height: 1.6;
        }
        .score-guide .highlight {
            color: var(--ocean-blue);
            font-weight: bold;
        }
        .shark-rating {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        .shark-rating span {
            font-size: 24px;
            margin-right: 5px;
            cursor: pointer;
        }
        .shark-rating span:hover {
            transform: scale(1.2);
        }
        .shark-rating span.active {
            color: var(--gold);
            transform: scale(1.3);
        }
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .results-table th {
            background-color: var(--ocean-blue);
            color: white;
            padding: 12px;
            text-align: left;
        }
        .results-table td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }
        .results-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .results-table tr:hover {
            background-color: #f0f8ff;
        }
        .winner-badge {
            background-color: var(--gold);
            color: var(--shark-gray);
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 12px;
            margin-left: 10px;
        }
        .chart-container {
            width: 100%;
            height: 400px;
            margin-top: 30px;
        }
        .floating-shark {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 60px;
            cursor: pointer;
            animation: float 3s ease-in-out infinite;
            z-index: 999;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        .tooltip {
            position: absolute;
            background-color: var(--shark-gray);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
            bottom: 100%;
            right: 0;
            margin-bottom: 10px;
            white-space: nowrap;
            display: none;
        }
        .floating-shark:hover .tooltip {
            display: block;
        }
        .pitch-timer {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            text-align: center;
        }
        .timer-display {
            font-size: 36px;
            font-weight: bold;
            color: var(--ocean-blue);
            margin: 10px 0;
        }
        .timer-buttons button {
            display: inline-block;
            margin: 0 5px;
            margin-bottom: 10px;
            padding: 8px 15px;
        }
        .timer-progress {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }
        .timer-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--seafoam), var(--ocean-blue));
            width: 0%;
            transition: width 0.5s;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div class="header">
        <div class="shark-icon shark-left">🦈</div>
        <div class="shark-icon shark-right">🦈</div>
        <h1>SHARK TANK HACKATHON PORTAL</h1>
        <h2>Where the next big ideas are born and judged</h2>
    </div>

    <div class="tabs">
        <div class="tab active" onclick="openTab('judging')">🦈 Judging Panel</div>
        <div class="tab" onclick="openTab('teams')">👥 Team Management</div>
        <div class="tab" onclick="openTab('results')">🏆 Results Dashboard</div>
    </div>

    <div id="judging" class="tab-content active">
        <div class="pitch-timer">
            <h3>⏱️ Pitch Timer</h3>
            <div class="timer-display" id="timerDisplay">05:00</div>
            <div class="timer-buttons">
                <button class="save-btn" onclick="startTimer()">Start</button>
                <button class="excel-btn" onclick="pauseTimer()">Pause</button>
                <button class="pdf-btn" onclick="resetTimer()">Reset</button>
            </div>
            <div class="timer-progress">
                <div class="timer-progress-bar" id="timerProgressBar"></div>
            </div>
        </div>

        <div class="judge-info">
            <div class="info-field">
                <label for="judge">Your Name:</label>
                <input type="text" id="judge" name="judge" placeholder="Enter your name" onchange="updateJudgeName()">
            </div>
            <div class="info-field">
                <label for="team">Select Team:</label>
                <select id="team" name="team" onchange="loadTeamData()">
                    <option value="">-- Select a team --</option>
                    <!-- Teams will be added dynamically -->
                </select>
            </div>
            <div class="info-field">
                <label for="project">Project Name:</label>
                <input type="text" id="project" name="project" readonly>
            </div>
        </div>

        <div class="progress-container">
            <div class="progress-bar" id="progressBar">0%</div>
        </div>

        <table id="scoreTable">
            <thead>
                <tr>
                    <th>Criteria</th>
                    <th>Description</th>
                    <th>Score Guide</th>
                    <th>Score (0-5)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="criteria-name">1. Innovation & Creativity <span id="emoji1" class="rating-emoji">🤔</span></td>
                    <td class="criteria-desc">
                        • Originality of the idea<br>
                        • Uniqueness and creativity in problem-solving<br>
                        • How well the solution differentiates itself from existing solutions
                    </td>
                    <td class="score-guide">
                        <span class="highlight">5 – Groundbreaking innovation; highly original concept</span><br>
                        3-4 – Innovative, with some unique aspects<br>
                        1-2 – Some originality but largely similar to existing ideas<br>
                        0 – No original elements
                        <div class="shark-rating">
                            Quick rate: 
                            <span onclick="setScore(1, 1)">1</span>
                            <span onclick="setScore(1, 2)">2</span>
                            <span onclick="setScore(1, 3)">3</span>
                            <span onclick="setScore(1, 4)">4</span>
                            <span onclick="setScore(1, 5)">5</span>
                        </div>
                    </td>
                    <td class="score-cell"><input type="number" min="0" max="5" value="0" oninput="updateScore(1, this.value)"></td>
                </tr>
                <tr>
                    <td class="criteria-name">2. Problem-Solution Fit <span id="emoji2" class="rating-emoji">🔍</span></td>
                    <td class="criteria-desc">
                        • Clear identification of the problem being solved<br>
                        • Relevance of the solution to the problem<br>
                        • Potential impact of the solution on the target audience
                    </td>
                    <td class="score-guide">
                        <span class="highlight">5 – Excellent problem understanding and solution alignment</span><br>
                        3-4 – Good problem fit, but minor gaps exist<br>
                        1-2 – Problem and solution are loosely connected<br>
                        0 – Solution does not address the stated problem
                        <div class="shark-rating">
                            Quick rate: 
                            <span onclick="setScore(2, 1)">1</span>
                            <span onclick="setScore(2, 2)">2</span>
                            <span onclick="setScore(2, 3)">3</span>
                            <span onclick="setScore(2, 4)">4</span>
                            <span onclick="setScore(2, 5)">5</span>
                        </div>
                    </td>
                    <td class="score-cell"><input type="number" min="0" max="5" value="0" oninput="updateScore(2, this.value)"></td>
                </tr>
                <tr>
                    <td class="criteria-name">3. Business Model & Scalability <span id="emoji3" class="rating-emoji">📈</span></td>
                    <td class="criteria-desc">
                        • Clear and sustainable business model<br>
                        • Defined revenue streams and cost structure<br>
                        • Scalability potential in different markets or regions
                    </td>
                    <td class="score-guide">
                        <span class="highlight">5 – Well-structured business model; highly scalable</span><br>
                        3-4 – Business model is clear but scalability is uncertain<br>
                        1-2 – Business model is vague or unsustainable<br>
                        0 – No business model presented
                        <div class="shark-rating">
                            Quick rate: 
                            <span onclick="setScore(3, 1)">1</span>
                            <span onclick="setScore(3, 2)">2</span>
                            <span onclick="setScore(3, 3)">3</span>
                            <span onclick="setScore(3, 4)">4</span>
                            <span onclick="setScore(3, 5)">5</span>
                        </div>
                    </td>
                    <td class="score-cell"><input type="number" min="0" max="5" value="0" oninput="updateScore(3, this.value)"></td>
                </tr>
                <tr>
                    <td class="criteria-name">4. Presentation & Pitch Delivery <span id="emoji4" class="rating-emoji">🎤</span></td>
                    <td class="criteria-desc">
                        • Clarity and persuasiveness of the pitch<br>
                        • Effective communication of the idea and its impact<br>
                        • Engagement with the audience and judges
                    </td>
                    <td class="score-guide">
                        <span class="highlight">5 – Highly engaging, clear, and convincing pitch</span><br>
                        3-4 – Good pitch with minor gaps in clarity or engagement<br>
                        1-2 – Basic pitch; lacked clarity or persuasiveness<br>
                        0 – Incomplete or ineffective pitch
                        <div class="shark-rating">
                            Quick rate: 
                            <span onclick="setScore(4, 1)">1</span>
                            <span onclick="setScore(4, 2)">2</span>
                            <span onclick="setScore(4, 3)">3</span>
                            <span onclick="setScore(4, 4)">4</span>
                            <span onclick="setScore(4, 5)">5</span>
                        </div>
                    </td>
                    <td class="score-cell"><input type="number" min="0" max="5" value="0" oninput="updateScore(4, this.value)"></td>
                </tr>
                <tr class="total-row">
                    <td colspan="3">TOTAL SCORE</td>
                    <td class="score-cell"><span id="totalScore" class="total-score">0</span> / 20</td>
                </tr>
            </tbody>
        </table>

        <div class="comments-section">
            <h3>🦈 Shark Feedback (What would make you invest?)</h3>
            <textarea id="comments" placeholder="Enter your constructive feedback here... What did you love? What needs work? Would you invest?"></textarea>
        </div>

        <div class="button-group">
            <button class="save-btn" onclick="saveEvaluation()"><span class="shark-icon">🦈</span> Save Evaluation</button>
            <button class="excel-btn" onclick="exportToExcel()"><span class="shark-icon">📊</span> Export to Excel</button>
            <button class="pdf-btn" onclick="generatePDF()"><span class="shark-icon">📄</span> Generate PDF</button>
            <button class="new-team-btn" onclick="newTeamEvaluation()"><span class="shark-icon">✨</span> New Team</button>
        </div>
    </div>

    <div id="teams" class="tab-content">
        <h2>👥 Team Management</h2>
        <div class="judge-info">
            <div class="info-field">
                <label for="newTeamName">Team Name:</label>
                <input type="text" id="newTeamName" placeholder="Enter team name">
            </div>
            <div class="info-field">
                <label for="newProjectName">Project Name:</label>
                <input type="text" id="newProjectName" placeholder="Enter project name">
            </div>
            <div class="info-field">
                <label for="newTeamMembers">Team Members:</label>
                <input type="text" id="newTeamMembers" placeholder="Enter member names (comma separated)">
            </div>
        </div>
        <button class="save-btn" onclick="addNewTeam()">➕ Add New Team</button>
        
        <h3 style="margin-top: 30px;">Registered Teams</h3>
        <div id="teamsContainer">
            <!-- Team cards will be added here dynamically -->
        </div>
    </div>

    <div id="results" class="tab-content">
        <h2>🏆 Results Dashboard</h2>
        <div class="button-group">
            <button class="excel-btn" onclick="exportAllToExcel()">📊 Export All Data to Excel</button>
            <button class="pdf-btn" onclick="generateSummaryPDF()">📄 Generate Summary PDF</button>
        </div>
        
        <h3 style="margin-top: 20px;">Team Rankings</h3>
        <table class="results-table" id="resultsTable">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Team</th>
                    <th>Project</th>
                    <th>Avg Score</th>
                    <th>Evaluations</th>
                    <th>Details</th>
                </tr>
            </thead>
            <tbody>
                <!-- Results will be displayed here -->
            </tbody>
        </table>
        
        <div class="chart-container">
            <canvas id="resultsChart"></canvas>
        </div>
    </div>

    <div id="teamDetailsModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 id="modalTeamName"></h2>
            <p><strong>Project:</strong> <span id="modalProjectName"></span></p>
            <p><strong>Members:</strong> <span id="modalTeamMembers"></span></p>
            
            <h3 style="margin-top: 20px;">Evaluations</h3>
            <div id="modalEvaluations">
                <!-- Evaluations will be added here -->
            </div>
        </div>
    </div>

    <div class="floating-shark" onclick="createConfetti()">
        🦈
        <div class="tooltip">Click for celebration!</div>
    </div>

    <script>
        // Initialize teams data
        let teams = [
            { id: 1, name: "Code Crushers", project: "AI Tutor", members: "Alice, Bob, Charlie" },
            { id: 2, name: "Byte Me", project: "Smart Fridge", members: "David, Eve" },
            { id: 3, name: "The Hackers", project: "AR Shopping", members: "Frank, Grace, Helen" }
        ];
        
        // Initialize evaluations data
        let evaluations = [];
        
        // Current evaluation
        let currentEvaluation = {
            judge: "",
            teamId: null,
            teamName: "",
            project: "",
            scores: [0, 0, 0, 0],
            total: 0,
            comments: "",
            timestamp: null
        };
        
        // Timer variables
        let timerInterval;
        let timeLeft = 5 * 60; // 5 minutes in seconds
        let isTimerRunning = false;
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            populateTeamDropdown();
            updateProgressBar();
            updateEmojis();
            renderTeamCards();
            
            // Load saved evaluations from localStorage
            const savedEvaluations = localStorage.getItem('hackathonEvaluations');
            if (savedEvaluations) {
                evaluations = JSON.parse(savedEvaluations);
            }
            
            // Load saved teams from localStorage
            const savedTeams = localStorage.getItem('hackathonTeams');
            if (savedTeams) {
                teams = JSON.parse(savedTeams);
                populateTeamDropdown();
                renderTeamCards();
            }
            
            // Check if judge name is saved
            const savedJudge = localStorage.getItem('hackathonJudge');
            if (savedJudge) {
                document.getElementById('judge').value = savedJudge;
                currentEvaluation.judge = savedJudge;
            }
        });
        
        function openTab(tabName) {
            // Hide all tab contents
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            
            // Remove active class from all tabs
            const tabs = document.getElementsByClassName('tab');
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
            }
            
            // Show the selected tab content and mark tab as active
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
            
            // If opening results tab, update the results table
            if (tabName === 'results') {
                updateResultsTable();
            } else if (tabName === 'teams') {
                renderTeamCards();
            }
        }
        
        function updateJudgeName() {
            const judgeName = document.getElementById('judge').value.trim();
            currentEvaluation.judge = judgeName;
            localStorage.setItem('hackathonJudge', judgeName);
        }
        
        function populateTeamDropdown() {
            const teamSelect = document.getElementById('team');
            teamSelect.innerHTML = '<option value="">-- Select a team --</option>';
            
            teams.forEach(team => {
                const option = document.createElement('option');
                option.value = team.id;
                option.textContent = team.name + " - " + team.project;
                teamSelect.appendChild(option);
            });
        }
        
        function renderTeamCards() {
            const container = document.getElementById('teamsContainer');
            container.innerHTML = '';
            
            if (teams.length === 0) {
                container.innerHTML = '<p>No teams registered yet. Add your first team above!</p>';
                return;
            }
            
            teams.forEach(team => {
                const card = document.createElement('div');
                card.className = 'team-card';
                
                card.innerHTML = `
                    <h3>${team.name}</h3>
                    <p><strong>Project:</strong> ${team.project}</p>
                    <p><strong>Members:</strong> ${team.members}</p>
                    <div class="team-actions">
                        <button onclick="editTeam(${team.id})" style="background-color: var(--ocean-blue); color: white;">Edit</button>
                        <button onclick="deleteTeam(${team.id})" style="background-color: var(--danger-red); color: white;">Delete</button>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }
        
        function addNewTeam() {
            const name = document.getElementById('newTeamName').value.trim();
            const project = document.getElementById('newProjectName').value.trim();
            const members = document.getElementById('newTeamMembers').value.trim();
            
            if (!name || !project) {
                alert('Please enter both team name and project name');
                return;
            }
            
            const newId = teams.length > 0 ? Math.max(...teams.map(t => t.id)) + 1 : 1;
            
            teams.push({
                id: newId,
                name: name,
                project: project,
                members: members
            });
            
            // Save to localStorage
            localStorage.setItem('hackathonTeams', JSON.stringify(teams));
            
            // Update UI
            populateTeamDropdown();
            renderTeamCards();
            
            // Clear form
            document.getElementById('newTeamName').value = '';
            document.getElementById('newProjectName').value = '';
            document.getElementById('newTeamMembers').value = '';
            
            // Show confirmation
            alert('Team added successfully!');
        }
        
        function editTeam(teamId) {
            const team = teams.find(t => t.id === teamId);
            if (!team) return;
            
            const newName = prompt("Enter new team name:", team.name);
            if (newName === null) return;
            
            const newProject = prompt("Enter new project name:", team.project);
            if (newProject === null) return;
            
            const newMembers = prompt("Enter team members (comma separated):", team.members);
            
            team.name = newName.trim();
            team.project = newProject.trim();
            team.members = newMembers ? newMembers.trim() : '';
            
            // Save to localStorage
            localStorage.setItem('hackathonTeams', JSON.stringify(teams));
            
            // Update UI
            populateTeamDropdown();
            renderTeamCards();
            
            // Update current evaluation if this is the team being evaluated
            if (currentEvaluation.teamId === teamId) {
                currentEvaluation.teamName = team.name;
                currentEvaluation.project = team.project;
                document.getElementById('project').value = team.project;
            }
        }
        
        function deleteTeam(teamId) {
            if (!confirm('Are you sure you want to delete this team? All evaluations for this team will also be deleted.')) {
                return;
            }
            
            // Remove team
            teams = teams.filter(t => t.id !== teamId);
            
            // Remove evaluations for this team
            evaluations = evaluations.filter(e => e.teamId !== teamId);
            
            // Save to localStorage
            localStorage.setItem('hackathonTeams', JSON.stringify(teams));
            localStorage.setItem('hackathonEvaluations', JSON.stringify(evaluations));
            
            // Update UI
            populateTeamDropdown();
            renderTeamCards();
            
            if (currentEvaluation.teamId === teamId) {
                newTeamEvaluation();
            }
        }
        
        function loadTeamData() {
            const teamId = parseInt(document.getElementById('team').value);
            if (!teamId) {
                document.getElementById('project').value = '';
                currentEvaluation.teamId = null;
                currentEvaluation.teamName = '';
                currentEvaluation.project = '';
                return;
            }
            
            const team = teams.find(t => t.id === teamId);
            if (team) {
                document.getElementById('project').value = team.project;
                currentEvaluation.teamId = team.id;
                currentEvaluation.teamName = team.name;
                currentEvaluation.project = team.project;
                
                // Check if this judge has already evaluated this team
                const judgeName = document.getElementById('judge').value.trim();
                if (judgeName) {
                    const existingEval = evaluations.find(e => 
                        e.judge === judgeName && e.teamId === team.id
                    );
                    
                    if (existingEval) {
                        if (confirm('You have already evaluated this team. Load your previous evaluation?')) {
                            loadEvaluation(existingEval);
                        }
                    }
                }
            }
        }
        
        function loadEvaluation(eval) {
            // Load scores
            for (let i = 0; i < 4; i++) {
                document.querySelectorAll('#scoreTable input[type="number"]')[i].value = eval.scores[i];
                currentEvaluation.scores[i] = eval.scores[i];
            }
            
            // Load comments
            document.getElementById('comments').value = eval.comments;
            currentEvaluation.comments = eval.comments;
            
            // Update total
            updateTotalScore();
            updateEmojis();
            updateProgressBar();
        }
        
        function setScore(criteriaNum, value) {
            const input = document.querySelectorAll('#scoreTable input[type="number"]')[criteriaNum-1];
            input.value = value;
            updateScore(criteriaNum, value);
        }
        
        function updateScore(criteriaNum, value) {
            // Validate input
            value = Math.min(5, Math.max(0, parseInt(value) || 0));
            
            // Update current evaluation
            currentEvaluation.scores[criteriaNum - 1] = value;
            
            // Update total
            updateTotalScore();
            
            // Update emoji
            updateEmojis();
            
            // Update progress bar
            updateProgressBar();
        }
        
        function updateTotalScore() {
            const total = currentEvaluation.scores.reduce((sum, score) => sum + score, 0);
            document.getElementById('totalScore').textContent = total;
            currentEvaluation.total = total;
        }
        
        function updateProgressBar() {
            const inputs = document.querySelectorAll('#scoreTable input[type="number"]');
            let filled = 0;
            
            inputs.forEach(input => {
                if (input.value && parseInt(input.value) > 0) {
                    filled++;
                }
            });
            
            const percent = (filled / inputs.length) * 100;
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percent + '%';
            progressBar.textContent = Math.round(percent) + '%';
            
            // Change color based on completion
            if (percent < 30) {
                progressBar.style.background = 'linear-gradient(90deg, #ff6b6b, #ff8e8e)';
            } else if (percent < 70) {
                progressBar.style.background = 'linear-gradient(90deg, #ffd166, #ffdf85)';
            } else {
                progressBar.style.background = 'linear-gradient(90deg, var(--seafoam), var(--ocean-blue))';
            }
        }
        
        function updateEmojis() {
            const emojis = ["🤔", "😐", "🙂", "😃", "🤩", "🔥"];
            const emojiElements = [
                document.getElementById('emoji1'),
                document.getElementById('emoji2'),
                document.getElementById('emoji3'),
                document.getElementById('emoji4')
            ];
            
            for (let i = 0; i < 4; i++) {
                const score = currentEvaluation.scores[i] || 0;
                let emojiIndex = Math.floor(score);
                if (emojiIndex >= emojis.length) emojiIndex = emojis.length - 1;
                emojiElements[i].textContent = emojis[emojiIndex];
            }
        }
        
        function saveEvaluation() {
            // Validate judge name
            currentEvaluation.judge = document.getElementById('judge').value.trim();
            if (!currentEvaluation.judge) {
                alert('Please enter your name');
                return;
            }
            
            // Validate team selection
            if (!currentEvaluation.teamId) {
                alert('Please select a team');
                return;
            }
            
            // Validate at least one score is entered
            if (currentEvaluation.total === 0) {
                if (!confirm('You haven\'t entered any scores. Save evaluation with 0 points?')) {
                    return;
                }
            }
            
            // Get comments
            currentEvaluation.comments = document.getElementById('comments').value.trim();
            
            // Add timestamp
            currentEvaluation.timestamp = new Date().toISOString();
            
            // Check if this judge has already evaluated this team
            const existingIndex = evaluations.findIndex(e => 
                e.judge === currentEvaluation.judge && e.teamId === currentEvaluation.teamId
            );
            
            if (existingIndex >= 0) {
                // Update existing evaluation
                evaluations[existingIndex] = {...currentEvaluation};
            } else {
                // Add new evaluation
                evaluations.push({...currentEvaluation});
            }
            
            // Save to localStorage
            localStorage.setItem('hackathonEvaluations', JSON.stringify(evaluations));
            
            // Show confirmation
            createConfetti();
            alert(`Evaluation saved for ${currentEvaluation.teamName}!\nTotal score: ${currentEvaluation.total}/20`);
        }
        
        function newTeamEvaluation() {
            // Reset form
            document.getElementById('team').value = '';
            document.getElementById('project').value = '';
            document.getElementById('comments').value = '';
            
            // Reset scores
            const inputs = document.querySelectorAll('#scoreTable input[type="number"]');
            inputs.forEach(input => {
                input.value = '0';
            });
            
            // Reset current evaluation
            currentEvaluation = {
                judge: document.getElementById('judge').value.trim(),
                teamId: null,
                teamName: "",
                project: "",
                scores: [0, 0, 0, 0],
                total: 0,
                comments: "",
                timestamp: null
            };
            
            // Update UI
            updateTotalScore();
            updateEmojis();
            updateProgressBar();
        }
        
        function exportToExcel() {
            // Validate there's data to export
            if (!currentEvaluation.teamId) {
                alert('Please select a team and enter evaluation data first');
                return;
            }
            
            // Create Excel workbook
            const wb = XLSX.utils.book_new();
            
            // Prepare data
            const data = [
                ["Shark Tank Hackathon Evaluation"],
                ["Judge:", currentEvaluation.judge || ''],
                ["Team:", currentEvaluation.teamName || ''],
                ["Project:", currentEvaluation.project || ''],
                ["Date:", new Date().toLocaleString()],
                [],
                ["Criteria", "Score (0-5)"],
                ["1. Innovation & Creativity", currentEvaluation.scores[0]],
                ["2. Problem-Solution Fit", currentEvaluation.scores[1]],
                ["3. Business Model & Scalability", currentEvaluation.scores[2]],
                ["4. Presentation & Pitch Delivery", currentEvaluation.scores[3]],
                ["TOTAL SCORE", currentEvaluation.total + " / 20"],
                [],
                ["Comments & Feedback:"],
                [currentEvaluation.comments || 'No comments provided']
            ];
            
            // Convert to worksheet
            const ws = XLSX.utils.aoa_to_sheet(data);
            
            // Add worksheet to workbook
            XLSX.utils.book_append_sheet(wb, ws, "Evaluation");
            
            // Generate file and download
            XLSX.writeFile(wb, `SharkTank_Evaluation_${currentEvaluation.teamName.replace(/[^a-z0-9]/gi, '_')}.xlsx`);
        }
        
        function generatePDF() {
            // Validate there's data to export
            if (!currentEvaluation.teamId) {
                alert('Please select a team and enter evaluation data first');
                return;
            }
            
            // Create a new jsPDF instance
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add title
            doc.setFontSize(20);
            doc.setTextColor(0, 119, 190); // Ocean blue
            doc.text('Shark Tank Hackathon Evaluation', 105, 15, { align: 'center' });
            
            // Add shark icon
            doc.setFontSize(40);
            doc.text('🦈', 20, 25);
            doc.text('🦈', 180, 25);
            
            // Add judge and team info
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            
            let y = 40;
            doc.text(`Judge: ${currentEvaluation.judge || 'Not specified'}`, 20, y);
            y += 10;
            doc.text(`Team: ${currentEvaluation.teamName || 'Not specified'}`, 20, y);
            y += 10;
            doc.text(`Project: ${currentEvaluation.project || 'Not specified'}`, 20, y);
            y += 10;
            doc.text(`Date: ${new Date().toLocaleString()}`, 20, y);
            y += 15;
            
            // Add scores table
            doc.setFontSize(14);
            doc.setTextColor(0, 119, 190);
            doc.text('Evaluation Scores', 20, y);
            y += 10;
            
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            
            // Table headers
            doc.setFillColor(74, 74, 74); // Shark gray
            doc.setTextColor(255, 255, 255);
            doc.rect(20, y, 170, 10, 'F');
            doc.text('Criteria', 25, y + 7);
            doc.text('Score', 180, y + 7, { align: 'right' });
            y += 10;
            
            // Table rows
            doc.setTextColor(0, 0, 0);
            const criteria = [
                '1. Innovation & Creativity',
                '2. Problem-Solution Fit',
                '3. Business Model & Scalability',
                '4. Presentation & Pitch Delivery'
            ];
            
            criteria.forEach((crit, index) => {
                doc.text(crit, 25, y + 7);
                doc.text(currentEvaluation.scores[index].toString(), 180, y + 7, { align: 'right' });
                y += 10;
            });
            
            // Total row
            doc.setFont('helvetica', 'bold');
            doc.text('TOTAL SCORE', 25, y + 7);
            doc.text(`${currentEvaluation.total} / 20`, 180, y + 7, { align: 'right' });
            doc.setFont('helvetica', 'normal');
            y += 15;
            
            // Add comments
            doc.setFontSize(14);
            doc.setTextColor(0, 119, 190);
            doc.text('Comments & Feedback:', 20, y);
            y += 10;
            
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            
            const comments = currentEvaluation.comments || 'No comments provided';
            const splitComments = doc.splitTextToSize(comments, 170);
            doc.text(splitComments, 20, y);
            
            // Save the PDF
            doc.save(`SharkTank_Evaluation_${currentEvaluation.teamName.replace(/[^a-z0-9]/gi, '_')}.pdf`);
        }
        
        function updateResultsTable() {
            const tableBody = document.querySelector('#resultsTable tbody');
            tableBody.innerHTML = '';
            
            if (evaluations.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="6" style="text-align: center;">No evaluations yet. Start judging teams!</td></tr>';
                return;
            }
            
            // Group evaluations by team and calculate averages
            const teamResults = {};
            
            evaluations.forEach(eval => {
                if (!teamResults[eval.teamId]) {
                    const team = teams.find(t => t.id === eval.teamId);
                    if (!team) return;
                    
                    teamResults[eval.teamId] = {
                        name: team.name,
                        project: team.project,
                        evaluations: [],
                        totalScore: 0
                    };
                }
                
                teamResults[eval.teamId].evaluations.push(eval);
                teamResults[eval.teamId].totalScore += eval.total;
            });
            
            // Convert to array and calculate averages
            const results = Object.keys(teamResults).map(teamId => {
                const team = teamResults[teamId];
                return {
                    teamId: parseInt(teamId),
                    name: team.name,
                    project: team.project,
                    evaluationCount: team.evaluations.length,
                    averageScore: team.totalScore / team.evaluations.length
                };
            });
            
            // Sort by average score (descending)
            results.sort((a, b) => b.averageScore - a.averageScore);
            
            // Display results
            results.forEach((result, index) => {
                const row = document.createElement('tr');
                
                // Highlight winner
                const isWinner = index === 0 && results.length > 1;
                
                row.innerHTML = `
                    <td>${index + 1} ${isWinner ? '<span class="winner-badge">WINNER</span>' : ''}</td>
                    <td>${result.name}</td>
                    <td>${result.project}</td>
                    <td>${result.averageScore.toFixed(1)}</td>
                    <td>${result.evaluationCount}</td>
                    <td><button onclick="showTeamDetails(${result.teamId})" style="background-color: var(--ocean-blue); color: white; padding: 5px 10px; border: none; border-radius: 4px;">Details</button></td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Update chart
            updateResultsChart(results);
        }
        
        function updateResultsChart(results) {
            const ctx = document.getElementById('resultsChart').getContext('2d');
            
            // Sort results by team name for the chart
            const sortedResults = [...results].sort((a, b) => a.name.localeCompare(b.name));
            
            // Destroy previous chart if it exists
            if (window.resultsChart) {
                window.resultsChart.destroy();
            }
            
            window.resultsChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: sortedResults.map(r => r.name),
                    datasets: [{
                        label: 'Average Score',
                        data: sortedResults.map(r => r.averageScore),
                        backgroundColor: 'rgba(0, 119, 190, 0.7)',
                        borderColor: 'rgba(0, 119, 190, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 20,
                            title: {
                                display: true,
                                text: 'Average Score (0-20)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Team Name'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Team Performance Comparison',
                            font: {
                                size: 18
                            }
                        },
                        tooltip: {
                            callbacks: {
                                afterLabel: function(context) {
                                    const team = sortedResults[context.dataIndex];
                                    return `Project: ${team.project}\nEvaluations: ${team.evaluationCount}`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function showTeamDetails(teamId) {
            const team = teams.find(t => t.id === teamId);
            if (!team) return;
            
            // Set team info
            document.getElementById('modalTeamName').textContent = team.name;
            document.getElementById('modalProjectName').textContent = team.project;
            document.getElementById('modalTeamMembers').textContent = team.members;
            
            // Get evaluations for this team
            const teamEvaluations = evaluations.filter(e => e.teamId === teamId);
            
            const evaluationsContainer = document.getElementById('modalEvaluations');
            evaluationsContainer.innerHTML = '';
            
            if (teamEvaluations.length === 0) {
                evaluationsContainer.innerHTML = '<p>No evaluations yet for this team.</p>';
            } else {
                // Calculate average score
                const avgScore = teamEvaluations.reduce((sum, eval) => sum + eval.total, 0) / teamEvaluations.length;
                
                evaluationsContainer.innerHTML += `
                    <p><strong>Average Score:</strong> ${avgScore.toFixed(1)} / 20 (from ${teamEvaluations.length} evaluation${teamEvaluations.length !== 1 ? 's' : ''})</p>
                `;
                
                // Add each evaluation
                teamEvaluations.forEach((eval, index) => {
                    const evalDiv = document.createElement('div');
                    evalDiv.className = 'team-card';
                    evalDiv.style.marginTop = '15px';
                    
                    evalDiv.innerHTML = `
                        <h4>Evaluation #${index + 1} by ${eval.judge}</h4>
                        <p><strong>Date:</strong> ${new Date(eval.timestamp).toLocaleString()}</p>
                        <p><strong>Total Score:</strong> ${eval.total} / 20</p>
                        <p><strong>Scores:</strong> 
                            Innovation (${eval.scores[0]}), 
                            Problem-Solution (${eval.scores[1]}), 
                            Business Model (${eval.scores[2]}), 
                            Presentation (${eval.scores[3]})
                        </p>
                        <p><strong>Comments:</strong> ${eval.comments || 'No comments'}</p>
                    `;
                    
                    evaluationsContainer.appendChild(evalDiv);
                });
            }
            
            // Show modal
            document.getElementById('teamDetailsModal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('teamDetailsModal').style.display = 'none';
        }
        
        function exportAllToExcel() {
            if (evaluations.length === 0) {
                alert('No evaluations to export');
                return;
            }
            
            // Create Excel workbook
            const wb = XLSX.utils.book_new();
            
            // Prepare teams data
            const teamsData = [
                ["Team Name", "Project Name", "Members"],
                ...teams.map(team => [team.name, team.project, team.members])
            ];
            
            // Prepare evaluations data
            const evaluationsData = [
                ["Judge", "Team", "Project", "Innovation", "Problem-Solution", "Business Model", "Presentation", "Total Score", "Comments", "Date"],
                ...evaluations.map(eval => {
                    const team = teams.find(t => t.id === eval.teamId) || {};
                    return [
                        eval.judge,
                        team.name || '',
                        team.project || '',
                        eval.scores[0],
                        eval.scores[1],
                        eval.scores[2],
                        eval.scores[3],
                        eval.total,
                        eval.comments,
                        new Date(eval.timestamp).toLocaleString()
                    ];
                })
            ];
            
            // Convert to worksheets
            const teamsWs = XLSX.utils.aoa_to_sheet(teamsData);
            const evaluationsWs = XLSX.utils.aoa_to_sheet(evaluationsData);
            
            // Add worksheets to workbook
            XLSX.utils.book_append_sheet(wb, teamsWs, "Teams");
            XLSX.utils.book_append_sheet(wb, evaluationsWs, "Evaluations");
            
            // Generate file and download
            XLSX.writeFile(wb, "SharkTank_Hackathon_All_Data.xlsx");
        }
        
        function generateSummaryPDF() {
            if (evaluations.length === 0) {
                alert('No evaluations to generate summary');
                return;
            }
            
            // Create a new jsPDF instance
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add title
            doc.setFontSize(20);
            doc.setTextColor(0, 119, 190);
            doc.text('Shark Tank Hackathon - Results Summary', 105, 15, { align: 'center' });
            
            // Add shark icon
            doc.setFontSize(40);
            doc.text('🦈', 20, 25);
            doc.text('🦈', 180, 25);
            
            // Add date
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            doc.text(`Generated on: ${new Date().toLocaleString()}`, 105, 30, { align: 'center' });
            
            // Group evaluations by team and calculate averages
            const teamResults = {};
            
            evaluations.forEach(eval => {
                if (!teamResults[eval.teamId]) {
                    const team = teams.find(t => t.id === eval.teamId);
                    if (!team) return;
                    
                    teamResults[eval.teamId] = {
                        name: team.name,
                        project: team.project,
                        evaluations: [],
                        totalScore: 0
                    };
                }
                
                teamResults[eval.teamId].evaluations.push(eval);
                teamResults[eval.teamId].totalScore += eval.total;
            });
            
            // Convert to array and calculate averages
            const results = Object.keys(teamResults).map(teamId => {
                const team = teamResults[teamId];
                return {
                    teamId: parseInt(teamId),
                    name: team.name,
                    project: team.project,
                    evaluationCount: team.evaluations.length,
                    averageScore: team.totalScore / team.evaluations.length
                };
            });
            
            // Sort by average score (descending)
            results.sort((a, b) => b.averageScore - a.averageScore);
            
            let y = 45;
            
            // Add summary table
            doc.setFontSize(14);
            doc.setTextColor(0, 119, 190);
            doc.text('Team Rankings', 20, y);
            y += 10;
            
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            
            // Table headers
            doc.setFillColor(74, 74, 74);
            doc.setTextColor(255, 255, 255);
            doc.rect(20, y, 170, 10, 'F');
            doc.text('Rank', 25, y + 7);
            doc.text('Team', 50, y + 7);
            doc.text('Project', 100, y + 7);
            doc.text('Avg Score', 160, y + 7, { align: 'right' });
            y += 10;
            
            // Table rows
            doc.setTextColor(0, 0, 0);
            results.forEach((result, index) => {
                // Highlight winner
                if (index === 0 && results.length > 1) {
                    doc.setFillColor(255, 215, 0); // Gold for winner
                    doc.rect(20, y, 170, 10, 'F');
                    doc.setTextColor(0, 0, 0);
                }
                
                doc.text((index + 1).toString(), 25, y + 7);
                doc.text(result.name, 50, y + 7);
                doc.text(result.project, 100, y + 7);
                doc.text(result.averageScore.toFixed(1), 160, y + 7, { align: 'right' });
                
                // Reset styles
                doc.setFillColor(255, 255, 255);
                doc.setTextColor(0, 0, 0);
                
                y += 10;
                
                // Add new page if needed
                if (y > 270) {
                    doc.addPage();
                    y = 20;
                }
            });
            
            y += 15;
            
            // Add evaluations count
            doc.setFontSize(14);
            doc.setTextColor(0, 119, 190);
            doc.text('Summary Statistics', 20, y);
            y += 10;
            
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            
            const totalEvaluations = evaluations.length;
            const totalTeams = results.length;
            const highestScore = Math.max(...evaluations.map(e => e.total));
            const lowestScore = Math.min(...evaluations.map(e => e.total));
            const avgScore = evaluations.reduce((sum, eval) => sum + eval.total, 0) / totalEvaluations;
            
            doc.text(`Total Teams: ${totalTeams}`, 20, y);
            y += 10;
            doc.text(`Total Evaluations: ${totalEvaluations}`, 20, y);
            y += 10;
            doc.text(`Highest Score: ${highestScore}/20`, 20, y);
            y += 10;
            doc.text(`Lowest Score: ${lowestScore}/20`, 20, y);
            y += 10;
            doc.text(`Average Score: ${avgScore.toFixed(1)}/20`, 20, y);
            y += 15;
            
            // Save the PDF
            doc.save('SharkTank_Hackathon_Summary.pdf');
        }
        
        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
                document.body.appendChild(confetti);
                
                // Remove confetti after animation
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }
        
        // Timer functions
        function startTimer() {
            if (isTimerRunning) return;
            
            isTimerRunning = true;
            timerInterval = setInterval(updateTimer, 1000);
        }
        
        function pauseTimer() {
            isTimerRunning = false;
            clearInterval(timerInterval);
        }
        
        function resetTimer() {
            pauseTimer();
            timeLeft = 5 * 60; // Reset to 5 minutes
            updateTimerDisplay();
        }
        
        function updateTimer() {
            if (timeLeft <= 0) {
                pauseTimer();
                createConfetti();
                alert("Time's up! Pitch completed.");
                return;
            }
            
            timeLeft--;
            updateTimerDisplay();
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Update progress bar
            const percent = (timeLeft / (5 * 60)) * 100;
            document.getElementById('timerProgressBar').style.width = percent + '%';
            
            // Change color based on time left
            if (percent < 20) {
                document.getElementById('timerProgressBar').style.background = 'linear-gradient(90deg, #ff6b6b, #ff8e8e)';
            } else if (percent < 50) {
                document.getElementById('timerProgressBar').style.background = 'linear-gradient(90deg, #ffd166, #ffdf85)';
            } else {
                document.getElementById('timerProgressBar').style.background = 'linear-gradient(90deg, var(--seafoam), var(--ocean-blue))';
            }
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target === document.getElementById('teamDetailsModal')) {
                closeModal();
            }
        };
    </script>
</body>
</html>